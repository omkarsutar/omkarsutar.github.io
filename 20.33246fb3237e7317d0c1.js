(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"2w85":function(e,t,i){"use strict";i.r(t),i.d(t,"RegisterPageModule",function(){return A});var s=i("ofXK"),r=i("3Pt+"),o=i("TEn/"),n=i("tyNb"),a=i("fXoL"),c=i("lGQG"),l=i("rNwt"),b=i("JqCM"),f=i("5eHb"),m=i("fePz");function u(e,t){if(1&e&&(a.Pb(0,"div",6),a.Lb(1,"i",10),a.sc(2),a.Ob()),2&e){const e=a.Zb().$implicit;a.zb(2),a.uc(" ",e.message," ")}}function h(e,t){if(1&e&&(a.Pb(0,"div"),a.rc(1,u,3,1,"div",9),a.Ob()),2&e){const e=t.$implicit,i=a.Zb();a.zb(1),a.fc("ngIf",i.newForm.get("email").hasError(e.type)&&(i.newForm.get("email").dirty||i.newForm.get("email").touched))}}let d=(()=>{class e{constructor(e,t){this.fb=e,this.router=t,this.formTitle="",this.notifyParent=new a.o,this.regexEmail=new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")}ngOnInit(){this.newForm=this.fb.group(this.formObject())}formObject(){return this.fieldLabels={email:"email"},this.validationMessages={email:[{type:"required",message:`${this.fieldLabels.email} required.`},{type:"pattern",message:`Enter valid ${this.fieldLabels.email} in acceptable format (example:abc@xyz.com)`}]},{email:["",[r.q.required,r.q.pattern(this.regexEmail)]]}}onCancel(){this.notifyParent.emit(null)}onSubmit(){this.notifyParent.emit(this.newForm.value.email)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(r.c),a.Kb(n.g))},e.\u0275cmp=a.Eb({type:e,selectors:[["app-form-in-account1"]],outputs:{notifyParent:"notifyParent"},decls:13,vars:4,consts:[[1,"d-flex","flex-row","justify-content-center",3,"formGroup"],[1,"form-group","text-center","w-75"],[1,"d-flex","flex-column","justify-content-center"],[1,"form-floating"],["formControlName","email","id","fl1","type","email","placeholder","name@example.com",1,"form-control"],["for","fl1"],[1,"red-color"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-lg","my-3","w-100",3,"disabled","click"],["class","red-color",4,"ngIf"],[1,"fa","fa-exclamation-circle"]],template:function(e,t){1&e&&(a.Pb(0,"form",0),a.Pb(1,"div",1),a.Pb(2,"div",2),a.Pb(3,"div",3),a.Lb(4,"input",4),a.Pb(5,"label",5),a.sc(6),a.Pb(7,"span",6),a.sc(8,"*"),a.Ob(),a.Ob(),a.Ob(),a.rc(9,h,2,1,"div",7),a.Ob(),a.Pb(10,"div"),a.Pb(11,"button",8),a.Xb("click",function(){return t.onSubmit()}),a.sc(12,"Get OTP"),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&e&&(a.fc("formGroup",t.newForm),a.zb(6),a.uc("Enter ",t.fieldLabels.email," "),a.zb(3),a.fc("ngForOf",t.validationMessages.email),a.zb(2),a.fc("disabled",!t.newForm.valid))},directives:[r.r,r.l,r.e,r.b,r.k,r.d,s.j,s.k],styles:[""]}),e})();function p(e,t){if(1&e&&(a.Pb(0,"div",6),a.Lb(1,"i",18),a.sc(2),a.Ob()),2&e){const e=a.Zb().$implicit;a.zb(2),a.uc(" ",e.message," ")}}function g(e,t){if(1&e&&(a.Pb(0,"div"),a.rc(1,p,3,1,"div",17),a.Ob()),2&e){const e=t.$implicit,i=a.Zb();a.zb(1),a.fc("ngIf",i.newForm.get("email").hasError(e.type)&&(i.newForm.get("email").dirty||i.newForm.get("email").touched))}}function v(e,t){if(1&e&&(a.Pb(0,"div",6),a.Lb(1,"i",18),a.sc(2),a.Ob()),2&e){const e=a.Zb().$implicit;a.zb(2),a.uc(" ",e.message," ")}}function P(e,t){if(1&e&&(a.Pb(0,"div"),a.rc(1,v,3,1,"div",17),a.Ob()),2&e){const e=t.$implicit,i=a.Zb();a.zb(1),a.fc("ngIf",i.newForm.get("otp").hasError(e.type)&&(i.newForm.get("otp").dirty||i.newForm.get("otp").touched))}}function y(e,t){1&e&&a.Lb(0,"i",19)}function O(e,t){1&e&&a.Lb(0,"i",20)}function w(e,t){if(1&e&&(a.Pb(0,"div",6),a.Lb(1,"i",18),a.sc(2),a.Ob()),2&e){const e=a.Zb().$implicit;a.zb(2),a.uc(" ",e.message," ")}}function S(e,t){if(1&e&&(a.Pb(0,"div"),a.rc(1,w,3,1,"div",17),a.Ob()),2&e){const e=t.$implicit,i=a.Zb();a.zb(1),a.fc("ngIf",i.newForm.get("password").hasError(e.type)&&(i.newForm.get("password").dirty||i.newForm.get("password").touched))}}function L(e,t){if(1&e&&(a.Pb(0,"div",6),a.Lb(1,"i",18),a.sc(2),a.Ob()),2&e){const e=a.Zb().$implicit;a.zb(2),a.uc(" ",e.message," ")}}function z(e,t){if(1&e&&(a.Pb(0,"div"),a.rc(1,L,3,1,"div",17),a.Ob()),2&e){const e=t.$implicit,i=a.Zb();a.zb(1),a.fc("ngIf",i.newForm.get("isPrivacyPolicyAndTermsOfServiceAccepted").hasError(e.type)&&(i.newForm.get("isPrivacyPolicyAndTermsOfServiceAccepted").dirty||i.newForm.get("isPrivacyPolicyAndTermsOfServiceAccepted").touched))}}const x=function(){return[]};let F=(()=>{class e{constructor(e,t){this.fb=e,this.router=t,this.formTitle="",this.notifyParent=new a.o,this.regexEmail=new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),this.showPass=!1}ngOnInit(){this.newForm=this.fb.group(this.formObject())}formObject(){return this.fieldLabels={email:"email",otp:"OTP",password:"password",isPrivacyPolicyAndTermsOfServiceAccepted:""},this.validationMessages={email:[{type:"required",message:`${this.fieldLabels.email} required.`},{type:"pattern",message:`Enter valid ${this.fieldLabels.email} in acceptable format (example:abc@xyz.com)`}],otp:[{type:"required",message:`${this.fieldLabels.otp} required.`}],password:[{type:"required",message:`${this.fieldLabels.password} required.`}],isPrivacyPolicyAndTermsOfServiceAccepted:[{type:"required",message:`${this.fieldLabels.isPrivacyPolicyAndTermsOfServiceAccepted} required.`}]},{email:[this.email,[r.q.required,r.q.pattern(this.regexEmail)]],otp:["",[r.q.required]],password:["",[r.q.required]],isPrivacyPolicyAndTermsOfServiceAccepted:["",[r.q.required]]}}onCancel(){this.notifyParent.emit(null)}onSubmit(){this.notifyParent.emit(this.newForm.value)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(r.c),a.Kb(n.g))},e.\u0275cmp=a.Eb({type:e,selectors:[["app-form-in-account4"]],inputs:{email:"email"},outputs:{notifyParent:"notifyParent"},decls:42,vars:16,consts:[[1,"d-flex","flex-row","justify-content-center",3,"formGroup"],[1,"form-group","text-center","w-75"],[1,"my-2"],[1,"form-floating"],["readonly","","formControlName","email","id","fl1","type","email","placeholder","name@example.com",1,"form-control"],["for","fl1"],[1,"red-color"],[4,"ngFor","ngForOf"],["formControlName","otp","id","fl1","type","text","inputmode","numeric","placeholder","name@example.com",1,"form-control"],[1,"input-group","d-flex","flex-row","justify-content-between"],["formControlName","password","id","fl1","placeholder","name@example.com",1,"form-control",3,"type"],[1,"input-group-text",3,"click"],["class","fa fa-eye-slash",4,"ngIf"],["class","fa fa-eye",4,"ngIf"],["formControlName","isPrivacyPolicyAndTermsOfServiceAccepted","type","checkbox",1,"form-check-input"],[3,"routerLink"],[1,"btn","btn-primary","btn-lg","my-3","w-100",3,"disabled","click"],["class","red-color",4,"ngIf"],[1,"fa","fa-exclamation-circle"],[1,"fa","fa-eye-slash"],[1,"fa","fa-eye"]],template:function(e,t){1&e&&(a.Pb(0,"form",0),a.Pb(1,"div",1),a.Pb(2,"div",2),a.Pb(3,"div",3),a.Lb(4,"input",4),a.Pb(5,"label",5),a.sc(6),a.Pb(7,"span",6),a.sc(8,"*"),a.Ob(),a.Ob(),a.Ob(),a.rc(9,g,2,1,"div",7),a.Ob(),a.Pb(10,"div",2),a.Pb(11,"div",3),a.Lb(12,"input",8),a.Pb(13,"label",5),a.sc(14),a.Pb(15,"span",6),a.sc(16,"*"),a.Ob(),a.Ob(),a.Ob(),a.rc(17,P,2,1,"div",7),a.Ob(),a.Pb(18,"div",2),a.Pb(19,"div",9),a.Pb(20,"div",3),a.Lb(21,"input",10),a.Pb(22,"label",5),a.sc(23),a.Pb(24,"span",6),a.sc(25,"*"),a.Ob(),a.Ob(),a.Ob(),a.Pb(26,"span",11),a.Xb("click",function(){return t.showPass=!t.showPass}),a.rc(27,y,1,0,"i",12),a.rc(28,O,1,0,"i",13),a.Ob(),a.Ob(),a.rc(29,S,2,1,"div",7),a.Ob(),a.Pb(30,"div"),a.Lb(31,"input",14),a.sc(32," I accept the "),a.Pb(33,"a",15),a.sc(34,"Privacy Policy"),a.Ob(),a.sc(35," and the "),a.Pb(36,"a",15),a.sc(37,"Terms of Service"),a.Ob(),a.Ob(),a.rc(38,z,2,1,"div",7),a.Pb(39,"div"),a.Pb(40,"button",16),a.Xb("click",function(){return t.onSubmit()}),a.sc(41,"Register"),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&e&&(a.fc("formGroup",t.newForm),a.zb(6),a.uc("Enter ",t.fieldLabels.email," "),a.zb(3),a.fc("ngForOf",t.validationMessages.email),a.zb(5),a.uc("Enter ",t.fieldLabels.otp," "),a.zb(3),a.fc("ngForOf",t.validationMessages.otp),a.zb(4),a.fc("type",t.showPass?"text":"password"),a.zb(2),a.uc("Enter ",t.fieldLabels.password," "),a.zb(4),a.fc("ngIf",t.showPass),a.zb(1),a.fc("ngIf",!t.showPass),a.zb(1),a.fc("ngForOf",t.validationMessages.password),a.zb(4),a.fc("routerLink",a.ic(14,x)),a.zb(3),a.fc("routerLink",a.ic(15,x)),a.zb(2),a.fc("ngForOf",t.validationMessages.isPrivacyPolicyAndTermsOfServiceAccepted),a.zb(2),a.fc("disabled",!t.newForm.valid))},directives:[r.r,r.l,r.e,r.b,r.k,r.d,s.j,s.k,r.a,n.i,o.r],styles:[""]}),e})();const I=function(e){return[e]};function T(e,t){if(1&e){const e=a.Qb();a.Pb(0,"div",8),a.Pb(1,"div",9),a.Lb(2,"img",10),a.Pb(3,"app-form-in-account1",11),a.Xb("notifyParent",function(t){return a.lc(e),a.Zb().verifyEmail(t)}),a.Ob(),a.Pb(4,"p"),a.sc(5,"Already have an account? "),a.Pb(6,"a",12),a.sc(7,"Login Now"),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&e){const e=a.Zb();a.zb(6),a.fc("routerLink",a.jc(1,I,e.geoService.pageUrls.login))}}function k(e,t){if(1&e){const e=a.Qb();a.Pb(0,"div",8),a.Pb(1,"div",9),a.Lb(2,"img",10),a.Pb(3,"app-form-in-account4",13),a.Xb("notifyParent",function(t){return a.lc(e),a.Zb().verifyOTP(t)}),a.Ob(),a.Pb(4,"div",14),a.sc(5,"Did not get OTP? "),a.Pb(6,"a",15),a.Xb("click",function(){return a.lc(e),a.Zb().regenerateOTP()}),a.sc(7,"Click Here"),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&e){const e=a.Zb();a.zb(3),a.fc("email",e.emailID)}}const E=[{path:"",component:(()=>{class e{constructor(e,t,i,s,r,o){this.authService=e,this.bsService=t,this.router=i,this.spinner=s,this.toastService=r,this.geoService=o,this.waitForOtp=!1,this.timeLeft=30,this.ipData={}}ngOnInit(){}getIpData(){this.geoService.GetTimeZones().subscribe(e=>{this.timeZones=e}),this.geoService.GetAllCountries().subscribe(e=>{this.countries=e}),setTimeout(()=>{this.authService.getIpData().subscribe(e=>{this.countries&&(this.ipData.country=this.countries.filter(t=>t.country===e.location.country.name)[0]),this.timeZones&&(this.ipData.timeZone=this.timeZones.filter(t=>t.timeZoneDetails.includes(e.time_zone.current_time.substr(e.time_zone.current_time.length-6)))[0]),setTimeout(()=>{this.ipData.country&&this.geoService.GetAllStates(this.ipData.country.countryID).subscribe(t=>{this.states=t,this.ipData.state=this.states.filter(t=>t.stateName===e.location.region.name)[0]})},2e3)},e=>{this.spinner.hide(),this.toastService.error(e.error.message)})},3e3)}saveUser(){this.firstName=this.emailID.split("@")[0],this.spinner.show(),this.authService.saveDetailsOnRegistration(this.firstName,this.emailID,25,1,"",this.ipData.country.countryID,this.ipData.state.stateID,this.ipData.timeZone.timeZoneID,this.userId,null).subscribe(e=>{"SUCCESS"===e.status&&(this.spinner.hide(),this.setGlobalVarible(),setTimeout(()=>{this.router.navigate([this.geoService.pageUrls.profile])},500))},e=>{this.spinner.hide(),this.toastService.error(e.error.message)})}setGlobalVarible(){this.spinner.show(),this.authService.setGlobalVarible(this.userId).subscribe(e=>{this.spinner.hide(),localStorage.removeItem("userGlob"),localStorage.setItem("userGlob",JSON.stringify(e)),this.bsService.userGlobalObjSetter(e),setTimeout(()=>{window.location.reload()},500)},e=>{this.spinner.hide(),this.toastService.error(e.error.message)})}setGlobalVaribleWithoutApi(e){localStorage.removeItem("userGlob"),localStorage.setItem("userGlob",JSON.stringify(e)),this.bsService.userGlobalObjSetter(e),setTimeout(()=>{window.location.reload()},500)}verifyEmail(e){this.emailID=e,this.spinner.show(),this.authService.getotpForNewEmail(e.toLowerCase()).subscribe(e=>{this.spinner.hide(),this.toastService.success(e.message),this.flagShowOTP=!0,this.waitTill30()},e=>{this.spinner.hide(),this.toastService.error(e.error.message)})}regenerateOTP(){this.waitForOtp?this.toastService.info(`Wait for ${this.timeLeft} seconds`):(this.spinner.show(),this.authService.getotpForNewEmail(this.emailID.toLowerCase()).subscribe(e=>{this.spinner.hide(),this.toastService.success(e.message),this.flagShowOTP=!0,this.waitTill30()},e=>{this.spinner.hide(),this.toastService.error(e.error.message)}))}verifyOTP(e){this.event=e,this.registerUser()}registerUser(){this.spinner.show(),this.authService.verifyotpForNewEmail(this.event.email,this.event.otp,this.event.password).subscribe(e=>{this.spinner.hide(),console.log(e),e.token&&localStorage.setItem("authToken","Bearer "+e.token),this.toastService.success("\tCongratulations...!!! You have successfully registered."),this.setGlobalVaribleWithoutApi(e.userGlob)},e=>{this.spinner.hide(),this.toastService.error(e.error.message)})}waitTill30(){this.waitForOtp=!0,this.timeLeft=30,!0===this.waitForOtp&&(this.interval=setInterval(()=>{this.timeLeft>0&&this.timeLeft--},1e3)),setTimeout(()=>{this.waitForOtp=!1,this.timeLeft=0,clearInterval(this.interval)},3e4)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(c.a),a.Kb(l.a),a.Kb(n.g),a.Kb(b.c),a.Kb(f.b),a.Kb(m.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["app-register"]],decls:14,vars:2,consts:[[1,"bg-primary"],[1,"d-flex","flex-row","justify-content-between","align-items-center","m-1"],[1,"btn",3,"click"],[1,"fa","fa-bars"],[1,"col"],[1,"m-0"],["class","d-flex flex-column justify-content-center h-100",4,"ngIf"],[2,"font-size","20px","color","white"],[1,"d-flex","flex-column","justify-content-center","h-100"],[1,"text-center"],["src","assets/images/logo.png","height","170px",1,"mb-4"],[3,"notifyParent"],[1,"mt-5",3,"routerLink"],[3,"email","notifyParent"],[1,"mt-5"],[1,"text-info",3,"click"]],template:function(e,t){1&e&&(a.Pb(0,"ion-header",0),a.Pb(1,"div",1),a.Pb(2,"div"),a.Pb(3,"button",2),a.Xb("click",function(){return t.geoService.openMenu()}),a.Lb(4,"i",3),a.Ob(),a.Ob(),a.Pb(5,"div",4),a.Pb(6,"h4",5),a.sc(7,"Register"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(8,"ion-content"),a.rc(9,T,8,3,"div",6),a.rc(10,k,8,1,"div",6),a.Pb(11,"ngx-spinner"),a.Pb(12,"p",7),a.sc(13,"Loading.."),a.Ob(),a.Ob(),a.Ob()),2&e&&(a.zb(9),a.fc("ngIf",!t.flagShowOTP),a.zb(1),a.fc("ngIf",t.flagShowOTP))},directives:[o.c,o.b,s.k,b.a,d,n.i,o.r,F],styles:[""]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Ib({type:e}),e.\u0275inj=a.Hb({imports:[[n.j.forChild(E)],n.j]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Ib({type:e}),e.\u0275inj=a.Hb({imports:[[s.b,r.f,r.o,o.o,q,b.b]]}),e})()}}]);